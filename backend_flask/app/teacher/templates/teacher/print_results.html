{% extends "teacher/print_base.html" %}
{% block content %}
  <h3 class="mb-1">ğŸ§¾ á›á‘áŸ’á’á•á›</h3>
  <div class="text-muted mb-3">ááŸ’á“á¶á€áŸ‹áŸ– {{ classroom.name }} â€” á”áŸ’ášá…á¶áŸ†ááŸ‚áŸ– {{ term.name }}</div>

  <table class="table table-bordered table-sm align-middle">
    <thead>
      <tr>
        <th>#</th>
        <th>á›áŸááŸá˜áŸ’á‚á¶á›áŸ‹áŸá·áŸáŸ’áŸ</th>
        <th>áˆáŸ’á˜áŸ„áŸ‡</th>
        {% for sub in subjects %}
          <th>{{ sub.name }}</th>
        {% endfor %}
        <th>á˜á’áŸ’á™á˜á—á¶á‚</th>
        <th>á…áŸ†áá¶ááŸ‹ááŸ’á“á¶á€áŸ‹</th><th>á¢áœááŸ’áá˜á¶á“</th><th>áŸá»áŸ†á…áŸ’á”á¶á”áŸ‹</th><th class="no-print">á”áŸ„áŸ‡á–á»á˜áŸ’á–</th>
      </tr>
    </thead>
    <tbody>
      {% for s in students %}
        <tr>
          <td>{{ loop.index }}</td>
          <td>{{ s.student_code }}</td>
          <td>{{ s.full_name }}</td>
          {% for sub in subjects %}
            {% set sc = mark_map.get((s.id, sub.id)) %}
            <td>{{ "%.1f"|format(sc) if sc is not none else "" }}</td>
          {% endfor %}
          <td>{{ "%.2f"|format(avg_map.get(s.id)) if avg_map.get(s.id) is not none else "-" }}</td>
          <td>{{ rank_map.get(s.id) if rank_map.get(s.id) else "-" }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}
